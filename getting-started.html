

  
  
 
  
  
 


<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Getting Started &mdash; minnal 1.0.4 documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-3.0.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/my-styles.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-3.0.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0.4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.0.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="_static/logo.png"/>
    <link rel="top" title="minnal 1.0.4 documentation" href="index.html" />
    <link rel="next" title="User Documentation" href="manual/index.html" />
    <link rel="prev" title="Minnal is a highly scalable and productive RESTful service framework that helps you eliminate boiler plate code and build services faster" href="index.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>
  
  <a href="https://github.com/minnal/minnal" class="visible-desktop">
  	<img style="position: absolute; top: 40px; right: 0; border: 0; z-index:1000;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png" alt="Fork me on GitHub">
  </a>


  <div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">Minnal</a>
        <span class="navbar-text navbar-version pull-left"><b>1.0.4</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
            
              <li class="dropdown globaltoc-container">
  <a href="index.html"
     class="dropdown-toggle"
     data-toggle="dropdown">Docs <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
    ><ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#domain-modeling">Domain Modeling</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#installing-minnal">Installing Minnal</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="#downloading-the-package">Downloading the package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#tutorial">Tutorial</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#shopping-cart-application">Shopping Cart Application</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#creating-the-project">Creating the project</a></li>
<li class="toctree-l4"><a class="reference internal" href="#creating-the-domain-classes">Creating the domain classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#test-your-apis">Test your APIs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#starting-the-server">Starting the server</a></li>
<li class="toctree-l4"><a class="reference internal" href="#view-your-apis">View your APIs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#customizing-an-api">Customizing an API</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="manual/index.html">User Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="manual/index.html#high-level-design">High level design</a></li>
<li class="toctree-l2"><a class="reference internal" href="manual/index.html#modules">Modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="manual/core.html">Minnal Core</a><ul>
<li class="toctree-l4"><a class="reference internal" href="manual/core.html#organizing-your-project">Organizing your project</a></li>
<li class="toctree-l4"><a class="reference internal" href="manual/core.html#container">Container</a></li>
<li class="toctree-l4"><a class="reference internal" href="manual/core.html#applications">Applications</a></li>
<li class="toctree-l4"><a class="reference internal" href="manual/core.html#resources">Resources</a></li>
<li class="toctree-l4"><a class="reference internal" href="manual/core.html#routes">Routes</a></li>
<li class="toctree-l4"><a class="reference internal" href="manual/core.html#filters">Filters</a></li>
<li class="toctree-l4"><a class="reference internal" href="manual/core.html#exception-handlers">Exception Handlers</a></li>
<li class="toctree-l4"><a class="reference internal" href="manual/core.html#plugins">Plugins</a></li>
<li class="toctree-l4"><a class="reference internal" href="manual/core.html#bundles">Bundles</a></li>
<li class="toctree-l4"><a class="reference internal" href="manual/core.html#application-context">Application Context</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="manual/jpa.html">Minnal Jpa</a><ul>
<li class="toctree-l4"><a class="reference internal" href="manual/jpa.html#domain-classes">Domain Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="manual/jpa.html#configuring-jpa">Configuring JPA</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="manual/migrations.html">Minnal Migrations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="manual/migrations.html#create-migrations">Create Migrations</a></li>
<li class="toctree-l4"><a class="reference internal" href="manual/migrations.html#run-migrations">Run Migrations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="manual/instrumentation.html">Minnal Instrumentation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="manual/instrumentation.html#resources">Resources</a></li>
<li class="toctree-l4"><a class="reference internal" href="manual/instrumentation.html#sub-resources">Sub-Resources</a></li>
<li class="toctree-l4"><a class="reference internal" href="manual/instrumentation.html#exclude-routes">Exclude Routes</a></li>
<li class="toctree-l4"><a class="reference internal" href="manual/instrumentation.html#overriding-routes">Overriding Routes</a></li>
<li class="toctree-l4"><a class="reference internal" href="manual/instrumentation.html#search-params">Search Params</a></li>
<li class="toctree-l4"><a class="reference internal" href="manual/instrumentation.html#actions">Actions</a></li>
<li class="toctree-l4"><a class="reference internal" href="manual/instrumentation.html#pagination">Pagination</a></li>
<li class="toctree-l4"><a class="reference internal" href="manual/instrumentation.html#dynamically-including-excluding-response-fields">Dynamically including &amp; excluding response fields</a></li>
<li class="toctree-l4"><a class="reference internal" href="manual/instrumentation.html#bulk-operations">Bulk Operations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="manual/security.html">Minnal Security</a><ul>
<li class="toctree-l4"><a class="reference internal" href="manual/security.html#session-store">Session Store</a></li>
<li class="toctree-l4"><a class="reference internal" href="manual/security.html#authenticators">Authenticators</a></li>
<li class="toctree-l4"><a class="reference internal" href="manual/security.html#white-listing-urls">White listing urls</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="manual/generator.html">Minnal Generator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="manual/generator.html#create-new-project">Create New Project</a></li>
<li class="toctree-l4"><a class="reference internal" href="manual/generator.html#generate-models">Generate Models</a></li>
<li class="toctree-l4"><a class="reference internal" href="manual/generator.html#generate-tests">Generate Tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="manual/generator.html#start-server">Start Server</a></li>
<li class="toctree-l4"><a class="reference internal" href="manual/generator.html#other-options">Other Options</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="manual/api.html">Minnal Api</a><ul>
<li class="toctree-l4"><a class="reference internal" href="manual/api.html#using-swagger-ui">Using Swagger UI</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="manual/metrics.html">Minnal Metrics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="manual/metrics.html#response-time-collector">Response Time Collector</a></li>
<li class="toctree-l4"><a class="reference internal" href="manual/metrics.html#datasource-stats-collector">Datasource Stats Collector</a></li>
<li class="toctree-l4"><a class="reference internal" href="manual/metrics.html#jmx-reporter">JMX Reporter</a></li>
<li class="toctree-l4"><a class="reference internal" href="manual/metrics.html#graphite-reporter">Graphite Reporter</a></li>
<li class="toctree-l4"><a class="reference internal" href="manual/metrics.html#custom-reporters">Custom Reporters</a></li>
<li class="toctree-l4"><a class="reference internal" href="manual/metrics.html#publishing-app-metrics">Publishing App Metrics</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="manual/test.html">Minnal Test</a><ul>
<li class="toctree-l4"><a class="reference internal" href="manual/test.html#testing-resources">Testing Resources</a></li>
<li class="toctree-l4"><a class="reference internal" href="manual/test.html#testing-jpa-resources">Testing JPA Resources</a></li>
<li class="toctree-l4"><a class="reference internal" href="manual/test.html#testing-models">Testing Models</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="manual/examples.html">Minnal Examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="manual/examples.html#shopping-cart-application">Shopping Cart Application</a></li>
<li class="toctree-l4"><a class="reference internal" href="manual/examples.html#cargo-application">Cargo Application</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="release-notes.html">Release Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="release-notes.html#minnal-1-0-5-22-oct-2013">minnal-1.0.5 / 22-Oct-2013</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-notes.html#minnal-1-0-4-11-oct-2013">minnal-1.0.4 / 11-Oct-2013</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-notes.html#minnal-1-0-3-10-oct-2013">minnal-1.0.3 / 10-Oct-2013</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-notes.html#minnal-1-0-2-09-oct-2013">minnal-1.0.2 / 09-Oct-2013</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-notes.html#minnal-1-0-1-02-sep-2013">minnal-1.0.1 / 02-Sep-2013</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-notes.html#minnal-1-0-0-29-aug-2013">minnal-1.0.0 / 29-Aug-2013</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-notes.html#minnal-0-9-9-28-aug-2013">minnal-0.9.9 / 28-Aug-2013</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-notes.html#minnal-0-9-8-27-aug-2013">minnal-0.9.8 / 27-Aug-2013</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-notes.html#minnal-0-9-7-17-aug-2013">minnal-0.9.7 / 17-Aug-2013</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-notes.html#minnal-0-9-6-12-aug-2013">minnal-0.9.6 / 12-Aug-2013</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contact.html">Contact</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contact.html#reporting-bugs-requesting-enhancements">Reporting bugs / Requesting Enhancements</a></li>
<li class="toctree-l2"><a class="reference internal" href="contact.html#contributing-to-minnal">Contributing to minnal</a></li>
<li class="toctree-l2"><a class="reference internal" href="contact.html#developers">Developers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="faq.html#exceptions-thrown">Exceptions thrown</a><ul>
<li class="toctree-l3"><a class="reference internal" href="faq.html#classnotfoundexception-com-sun-tools-attach-virtualmachine">ClassNotFoundException: com.sun.tools.attach.VirtualMachine</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
  <li><a href="index.html"
         title="Previous Chapter: Minnal is a highly scalable and productive RESTful service framework that helps you eliminate boiler plate code and build services faster">&laquo; Minnal is a high...</a></li>
  <li><a href="manual/index.html"
         title="Next Chapter: User Documentation">User Documentati... &raquo;</a></li>
            
            
            
            
              <li></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#domain-modeling">Domain Modeling</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#installing-minnal">Installing Minnal</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="#downloading-the-package">Downloading the package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#tutorial">Tutorial</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#shopping-cart-application">Shopping Cart Application</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#creating-the-project">Creating the project</a></li>
<li class="toctree-l4"><a class="reference internal" href="#creating-the-domain-classes">Creating the domain classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#test-your-apis">Test your APIs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#starting-the-server">Starting the server</a></li>
<li class="toctree-l4"><a class="reference internal" href="#view-your-apis">View your APIs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#customizing-an-api">Customizing an API</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="manual/index.html">User Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="release-notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="contact.html">Contact</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
</ul>

        </div>
      </div>
    <div class="col-md-9">
      
  <div class="section" id="getting-started">
<span id="id1"></span><h1>Getting Started</h1>
<p>This guide will serve as basic introduction to installing Minnal and take you through the process of creating a simple Minnal project: <em>Shopping cart</em>. We will also take you through some of the important concepts and good practices around <em>domain modeling</em> along the way.</p>
<div class="section" id="overview">
<h2>Overview</h2>
<p>Minnal is a highly scalable and productive RESTful service framework that helps you eliminate boiler plate code and build services faster. Minnal is a <em>Tamil</em> noun, meaning <strong>&#8220;lightning&#8221;</strong>. It allows you to build services at lightning speed through its powerful <em>instrumentation</em> module. It generates the API&#8217;s for your resources at runtime and eliminates the need to write <em>controller</em> and <em>data access</em> layers for your service leaving you to focus on <strong>enriching your domain</strong></p>
<p>Minnal comes with <em>out-of-the-box</em> support for <strong>persistence</strong>, <strong>configuration</strong>, <strong>logging</strong>, <strong>metrics</strong>, <strong>API documentation</strong> and is extremely powerful for services that are mostly <em>CRUD</em> centric but doesn&#8217;t restrict you from using it for business interfaces as well.</p>
<p>A typical REST service consist of a <em>controller layer</em> that handles the incoming request, optionally delegates them to the <em>application layer</em> which in turn call the <em>domain layer</em> and <em>repository layer</em>. Most of these are boilerplate code and the real work happens in the domain layer and application layer. However good is the REST framework, it may not help you avoid writing the boilerplate code and you will have spend your effort in testing and managing these code. This is what Minnal is attempting to solve. It eliminates the DAL and Controller from your application, so you can focus on enriching your domain.</p>
<p>The framework has a modular design that makes every functionality easily pluggable. If you wish Minnal not to generate the API&#8217;s for you, you can exclude the <em>instrumentation</em> module from you application. If you wish to write your own DAL, you could do well so by excluding the <em>JPA</em> module. The framework exposes hooks at different stages of the application lifecycle and can be easily extended to support custom functionalities.</p>
<p>Minnal uses <a class="reference external" href="http://netty.io/">Netty</a>, a NIO client-server framework, underneath to achieve high scalability. <a class="reference external" href="http://jackson.codehaus.org/">Jackson</a> is used for serializing json/xml and <a class="reference external" href="https://code.google.com/p/snakeyaml/">Snakeyaml</a> for serializing yaml. Minnal recommends JPA for all DB access and uses <a class="reference external" href="http://flywaydb.org/">FlywayDB</a> for running db migrations.</p>
<div class="section" id="domain-modeling">
<h3>Domain Modeling</h3>
<p>We believe a very good domain model makes an application easily manageable. Minnal borrows a lots of concepts from <a class="reference external" href="http://dddcommunity.org/learning-ddd/what_is_ddd/">Domain Driven Design</a> and enforces it from within the framework.</p>
</div>
</div>
<div class="section" id="installing-minnal">
<h2>Installing Minnal</h2>
<div class="section" id="prerequisites">
<h3>Prerequisites</h3>
<p>To run minnal, you need JDK 6 or later. Minnal has been tested with Sun JDK, OpenJDK support will be taken up in the coming versions. Minnal recommends you to use maven to manage your project dependencies, the installation package requires <a class="reference external" href="http://maven.apache.org/download.cgi">maven 3</a> to get started.</p>
<p>Ensure your <strong>JAVA_HOME is set to JDK</strong> and not the JRE. Minnal instrumentation module requires tools.jar from JDK libraries to be in the classpath.</p>
</div>
<div class="section" id="downloading-the-package">
<h3>Downloading the package</h3>
<p>Download the latest minnal installation package from <a class="reference external" href="https://github.com/minnal/minnal/releases/download/minnal-1.0.4/minnal-1.0.4.tar.gz">here</a> and extract the archive to a folder with read and write access.</p>
<p>Add the the framework binary folder /path/to/minnal-X.X.X/bin to your path, so you can conveniently run the minnal executable. If you are running on windows, add it to the global environment variables</p>
<p>Test if you can run minnal,</p>
<div class="highlight-bash"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$ </span>minnal -help
</pre></div>
</td></tr></table></div>
<p>If the installation is proper, you should be able to see the usage. Ensure you have executable permissions for the /path/to/minnal-X.X.X/bin folder</p>
<div class="highlight-bash"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre>Usage: minnal <span class="o">[</span>options<span class="o">]</span> <span class="o">[</span><span class="nb">command</span><span class="o">]</span> <span class="o">[</span><span class="nb">command </span>options<span class="o">]</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="tutorial">
<h2>Tutorial</h2>
<p>Let us get started by build a simple shopping cart application and in the process learn the core concepts of Minnal Framework.</p>
<div class="section" id="shopping-cart-application">
<h3>Shopping Cart Application</h3>
<p>Our shopping cart application will expose the below API&#8217;s,</p>
<blockquote>
<div><ul class="simple">
<li>Create a new product</li>
<li>Get all the available products</li>
<li>Search the available products by title</li>
<li>Create a new shopping cart</li>
<li>Add items to shopping cart</li>
<li>Update items in the shopping cart</li>
<li>Delete items in shopping cart</li>
<li>Search for items in shopping cart</li>
</ul>
</div></blockquote>
<div class="section" id="creating-the-project">
<h4>Creating the project</h4>
<p>Creating a new project is quite simple with minnal generators.</p>
<div class="highlight-bash"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$ </span>minnal new shopping-cart
</pre></div>
</td></tr></table></div>
<p>This command will create a maven project, generate the application classes and a sample configuration file. You should be seeing the below logs when you run the command,</p>
<div class="highlight-bash"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span class="o">[</span>INFO<span class="o">]</span> Creating the project shopping-cart under /Users/ganeshs
<span class="o">[</span>INFO<span class="o">]</span> Creating the folder src/main/java under /Users/ganeshs/shopping-cart
<span class="o">[</span>INFO<span class="o">]</span> Creating the folder src/test/java under /Users/ganeshs/shopping-cart
<span class="o">[</span>INFO<span class="o">]</span> Creating the folder src/main/resources under /Users/ganeshs/shopping-cart
<span class="o">[</span>INFO<span class="o">]</span> Creating the folder src/test/resources under /Users/ganeshs/shopping-cart
<span class="o">[</span>INFO<span class="o">]</span> Creating the folder src/main/resources/META-INF under /Users/ganeshs/shopping-cart
<span class="o">[</span>INFO<span class="o">]</span> Creating the folder src/main/resources/META-INF/services under /Users/ganeshs/shopping-cart
<span class="o">[</span>INFO<span class="o">]</span> Creating the container config file /Users/ganeshs/shopping-cart/src/main/resources/META-INF/container.yml
<span class="o">[</span>INFO<span class="o">]</span> Creating the application spi file /Users/ganeshs/shopping-cart/src/main/resources/META-INF/services/org.minnal.core.Application
<span class="o">[</span>INFO<span class="o">]</span> Creating the pom file pom.xml
<span class="o">[</span>INFO<span class="o">]</span> Creating the file /Users/ganeshs/shopping-cart/src/main/resources/log4j.properties
<span class="o">[</span>INFO<span class="o">]</span> Creating the application config file /Users/ganeshs/shopping-cart/src/main/resources/META-INF/shoppingcart.yml
<span class="o">[</span>INFO<span class="o">]</span> Creating the file /Users/ganeshs/shopping-cart/src/main/java/com/shopping/cart/ShoppingCartConfiguration.java
<span class="o">[</span>INFO<span class="o">]</span> Creating the file /Users/ganeshs/shopping-cart/src/main/java/com/shopping/cart/ShoppingCartApplication.java
</pre></div>
</td></tr></table></div>
<p>We have just created a minnal project that can generate API&#8217;s from JPA models. The application has been configured to connect to an in-memory HSQL database.</p>
</div>
<div class="section" id="creating-the-domain-classes">
<h4>Creating the domain classes</h4>
<p>Minnal provides generators for creating JPA models. Lets create the domain classes to the application to make it worth enough. The users of our application should be able to search the products, so lets start from there.</p>
<div class="highlight-bash"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd </span>shopping-cart
<span class="nv">$ </span>minnal generate Product -aggregateRoot -fields title:string:true price:double
</pre></div>
</td></tr></table></div>
<p>This will create a Product class under the package com.shopping.cart.domain,</p>
<div class="highlight-bash"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span class="o">[</span>INFO<span class="o">]</span> Generating the model class Product under the package com.shopping.cart.domain
<span class="o">[</span>INFO<span class="o">]</span> Creating the file /Users/ganeshs/shopping-cart/src/main/java/com/shopping/cart/domain/Product.java
</pre></div>
</td></tr></table></div>
<p>We have marked the class Product as <tt class="docutils literal"><span class="pre">&#64;AggregateRoot</span></tt> and hence it will be treated as a resource. We have also marked the field title as <tt class="docutils literal"><span class="pre">&#64;Searchable</span></tt>, so minnal will created API&#8217;s with title in the search params.</p>
<p>We recommend you to read through <a class="reference external" href="http://www.infoq.com/minibooks/domain-driven-design-quickly">Domain Driven Design Quickly</a>, a free ebook that explains in detail about identifying the <em>aggregate roots</em> in a domain. <em>&#8220;Aggregates are groups of entities that belong together and Aggregate Root is the entity that holds them all together. With out an aggregate root, other entities can&#8217;t exist&#8221;</em>. With this definition, we can identify two Aggregate roots in our domain, Product and ShoppingCart. ShoppingCartItem belongs to ShoppingCart, without the cart, cart item can&#8217;t exist. Product can be regarded as an aggregate root although it doesn&#8217;t have any children under it as it can exist without a ShoppingCart and ShoppingCartItem.</p>
<p>The generated class will look like this,</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">shopping</span><span class="o">.</span><span class="na">cart</span><span class="o">.</span><span class="na">domain</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.minnal.jpa.entity.BaseDomain</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.persistence.Entity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.persistence.Table</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.minnal.instrument.entity.*</span><span class="o">;</span>

<span class="cm">/**</span>
<span class="cm"> * Product domain class</span>
<span class="cm"> *</span>
<span class="cm"> * @author Generated by minnal-generator</span>
<span class="cm"> */</span>
<span class="hll"><span class="nd">@AggregateRoot</span>
</span><span class="nd">@Entity</span>
<span class="nd">@Table</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;products&quot;</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Product</span> <span class="kd">extends</span> <span class="n">BaseDomain</span> <span class="o">{</span>

<span class="hll">        <span class="nd">@Searchable</span>
</span>        <span class="kd">private</span> <span class="n">String</span> <span class="n">title</span><span class="o">;</span>

        <span class="kd">private</span> <span class="n">Double</span> <span class="n">price</span><span class="o">;</span>

        <span class="o">...</span>
        <span class="o">...</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>The base class BaseDomain extends the Model class from <a class="reference external" href="https://github.com/ActiveJpa/activejpa">ActiveJpa</a>. <em>ActiveJpa is a java library that attempts to implement the active record pattern on top of JPA. It eliminates the need to create DAO or Repository classes and make programming DAL a lot more simpler</em>. Minnal recommends using JPA for DB access and provides a JPA plugin module with ActiveJpa integration.</p>
<p>Lets create the other domain classes for our application. We will need ShoppingCart and ShoppingCartItem classes to represent a shopping cart,</p>
<div class="highlight-bash"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$ </span>minnal generate ShoppingCart -aggregateRoot -fields customerId:string
<span class="nv">$ </span>minnal generate ShoppingCartItem -fields quantity:integer
</pre></div>
</td></tr></table></div>
<p>Again the class ShoppingCart is marked as &#64;AggregateRoot and will contain ShoppingCartItems. Since ShoppingCartItem can&#8217;t exist without a ShoppingCart, we are not marking it as &#64;AggregateRoot. Lets start associating the entities together,</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span class="nd">@AggregateRoot</span>
<span class="nd">@Entity</span>
<span class="nd">@Table</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;shopping_carts&quot;</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ShoppingCart</span> <span class="kd">extends</span> <span class="n">BaseDomain</span> <span class="o">{</span>

        <span class="kd">private</span> <span class="n">String</span> <span class="n">customerId</span><span class="o">;</span>

        <span class="kd">private</span> <span class="n">Set</span><span class="o">&lt;</span><span class="n">ShoppingCartItem</span><span class="o">&gt;</span> <span class="n">cartItems</span><span class="o">;</span>

        <span class="nd">@OneToMany</span><span class="o">(</span><span class="n">fetch</span><span class="o">=</span><span class="n">FetchType</span><span class="o">.</span><span class="na">LAZY</span><span class="o">,</span> <span class="n">cascade</span><span class="o">=</span><span class="n">CascadeType</span><span class="o">.</span><span class="na">ALL</span><span class="o">)</span>
        <span class="nd">@JoinColumn</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;shopping_cart_id&quot;</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">Set</span><span class="o">&lt;</span><span class="n">ShoppingCartItem</span><span class="o">&gt;</span> <span class="nf">getCartItems</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">cartItems</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setCartItems</span><span class="o">(</span><span class="n">Set</span><span class="o">&lt;</span><span class="n">ShoppingCartItem</span><span class="o">&gt;</span> <span class="n">cartItems</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">cartItems</span> <span class="o">=</span> <span class="n">cartItems</span><span class="o">;</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></div></td><td class="code"><div class="highlight"><pre><span class="nd">@Entity</span>
<span class="nd">@Table</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;shopping_cart_items&quot;</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ShoppingCartItem</span> <span class="kd">extends</span> <span class="n">BaseDomain</span> <span class="o">{</span>

        <span class="kd">private</span> <span class="n">Product</span> <span class="n">product</span><span class="o">;</span>

        <span class="kd">private</span> <span class="n">Integer</span> <span class="n">quantity</span><span class="o">;</span>

        <span class="kd">private</span> <span class="n">ShoppingCart</span> <span class="n">cart</span><span class="o">;</span>

        <span class="nd">@ManyToOne</span><span class="o">(</span><span class="n">fetch</span><span class="o">=</span><span class="n">FetchType</span><span class="o">.</span><span class="na">LAZY</span><span class="o">)</span>
        <span class="nd">@JoinColumn</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;shopping_cart_id&quot;</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">ShoppingCart</span> <span class="nf">getCart</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">cart</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setCart</span><span class="o">(</span><span class="n">ShoppingCart</span> <span class="n">cart</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">cart</span> <span class="o">=</span> <span class="n">cart</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@ManyToOne</span><span class="o">(</span><span class="n">fetch</span><span class="o">=</span><span class="n">FetchType</span><span class="o">.</span><span class="na">LAZY</span><span class="o">)</span>
        <span class="nd">@JoinColumn</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;product_id&quot;</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">Product</span> <span class="nf">getProduct</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">product</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setProduct</span><span class="o">(</span><span class="n">Product</span> <span class="n">product</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">product</span> <span class="o">=</span> <span class="n">product</span><span class="o">;</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="test-your-apis">
<h4>Test your APIs</h4>
<p>Minnal can generate test cases for the APIs it created. These tests may not be sufficient enough to certify your APIs but can ensure high level functionality is working.</p>
<div class="highlight-bash"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre>minnal generate-tests -packages com.shopping.cart
</pre></div>
</td></tr></table></div>
<p>This would create tests <em>src/test/java</em> for all your resources. You can run <tt class="docutils literal"><span class="pre">mvn</span> <span class="pre">test</span></tt> to test them</p>
</div>
<div class="section" id="starting-the-server">
<h4>Starting the server</h4>
<p>That&#8217;s it. We are good to start the server now. <strong>But wait, I haven&#8217;t written my DAO and controller classes?</strong> You don&#8217;t have to write them, minnal generates the API&#8217;s at runtime. Creating domain classes is the minimum task you have to do with minnal. Let us start the server and look at the generated API&#8217;s</p>
</div>
<div class="section" id="view-your-apis">
<h4>View your APIs</h4>
<p>The API&#8217;s are generated during the startup on the application and will be available only during the application lifetime. Minnal generates the API&#8217;s at runtime using bytecode enhancement techniques and doesn&#8217;t generate the source code for you purposefully. Minnal has intentionally kept away from code generation as managing the generated code will be a mess. From our past experience, we have seem developers trying to modify the generated code and mess them up. Another reason why minnal doesn&#8217;t generate code is to make the application look simpler with just domain code in it.</p>
<p>Minnal has support for <a class="reference external" href="https://github.com/wordnik/swagger-core/wiki">Swagger</a> api documentation. So you can view your api&#8217;s from <a class="reference external" href="http://swagger.wordnik.com/">swagger ui</a>. In the swagger ui, type in the url <em>http://localhost:8080/api/shoppingcarts/api-docs.json</em> to view the generated APIs</p>
</div>
<div class="section" id="customizing-an-api">
<h4>Customizing an API</h4>
<p>Say, we want to customize the create shopping cart api <em>POST /shopping_carts</em> to do additional stuff while creating the cart. We can override the api by creating a resource class for shopping cart. Minnal will generate all the API&#8217;s but for the customized one. Let&#8217;s try creating a ShoppingCartResource class under <em>org.minnal.examples.shoppingcart.resources</em></p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">shopping</span><span class="o">.</span><span class="na">cart</span><span class="o">.</span><span class="na">resources</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.minnal.core.resource.Resource</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.minnal.core.Request</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.minnal.core.Response</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.shopping.cart.domain.ShoppingCart</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.jboss.netty.handler.code.http.HttpResponseStatus</span><span class="o">;</span>

<span class="c1">// The @Resource annotation tells minnal that this class is resource class.</span>
<span class="c1">// The value parameter takes in an class that&#39;s marked with @AggregateRoot domain</span>
<span class="c1">// Minnal will scan for all resources marked with @Resource</span>
<span class="nd">@Resource</span><span class="o">(</span><span class="n">value</span><span class="o">=</span><span class="n">ShoppingCart</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ShoppingCartResource</span> <span class="o">{</span>

  <span class="c1">// We are overriding the api POST /shopping_carts.</span>
  <span class="c1">// The method name should be the same as that of the one from</span>
  <span class="c1">// the route definitions at http://localhost:8080/admin/routes/shoppingCart</span>
  <span class="kd">public</span> <span class="n">ShoppingCart</span> <span class="nf">createShoppingCart</span><span class="o">(</span><span class="n">Request</span> <span class="n">request</span><span class="o">,</span> <span class="n">Response</span> <span class="n">response</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// Your custom code here</span>
    <span class="n">response</span><span class="o">.</span><span class="na">setStatus</span><span class="o">(</span><span class="n">HttpResponseStatus</span><span class="o">.</span><span class="na">OK</span><span class="o">);</span>
    <span class="c1">// The return value from this method will be set as response content</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>When you customize an API, do make sure that you create a method with the name as defined in the routes definition from <a class="reference external" href="http://localhost:8080/admin/routes/shopping_carts">http://localhost:8080/admin/routes/shopping_carts</a>. And don&#8217;t forget to mark the class with &#64;Resource annotation.</p>
<p>Now all calls to <em>POST /shopping_carts</em> will be hitting our custom resource class.</p>
</div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
  
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2013, Ganesh Subramanian.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2b1.<br/>
    </p>
  </div>
</footer>
  <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-41566886-1', 'minnal.github.io');
        ga('send', 'pageview');
  </script>

  </body>
</html>