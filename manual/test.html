

  
  
 
  
  
 


<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Minnal Test &mdash; minnal 1.0.7 documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.0.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/my-styles.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.0.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0.7',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.0.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../_static/logo.png"/>
    <link rel="top" title="minnal 1.0.7 documentation" href="../index.html" />
    <link rel="up" title="User Documentation" href="index.html" />
    <link rel="next" title="Minnal Examples" href="examples.html" />
    <link rel="prev" title="Minnal Metrics" href="metrics.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>
  
  <a href="https://github.com/minnal/minnal" class="visible-desktop">
  	<img style="position: absolute; top: 40px; right: 0; border: 0; z-index:1000;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png" alt="Fork me on GitHub">
  </a>


  <div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">Minnal</a>
        <span class="navbar-text navbar-version pull-left"><b>1.0.7</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
            
              <li class="dropdown globaltoc-container">
  <a href="../index.html"
     class="dropdown-toggle"
     data-toggle="dropdown">Docs <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
    ><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting-started.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting-started.html#overview">Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started.html#domain-modeling">Domain Modeling</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started.html#installing-minnal">Installing Minnal</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started.html#downloading-the-package">Downloading the package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started.html#tutorial">Tutorial</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started.html#shopping-cart-application">Shopping Cart Application</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../getting-started.html#creating-the-project">Creating the project</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started.html#creating-the-domain-classes">Creating the domain classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started.html#test-your-apis">Test your APIs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started.html#starting-the-server">Starting the server</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started.html#view-your-apis">View your APIs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started.html#customizing-an-api">Customizing an API</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">User Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#high-level-design">High level design</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#modules">Modules</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="core.html">Minnal Core</a><ul>
<li class="toctree-l4"><a class="reference internal" href="core.html#organizing-your-project">Organizing your project</a></li>
<li class="toctree-l4"><a class="reference internal" href="core.html#container">Container</a></li>
<li class="toctree-l4"><a class="reference internal" href="core.html#applications">Applications</a></li>
<li class="toctree-l4"><a class="reference internal" href="core.html#resources">Resources</a></li>
<li class="toctree-l4"><a class="reference internal" href="core.html#routes">Routes</a></li>
<li class="toctree-l4"><a class="reference internal" href="core.html#filters">Filters</a></li>
<li class="toctree-l4"><a class="reference internal" href="core.html#exception-handlers">Exception Handlers</a></li>
<li class="toctree-l4"><a class="reference internal" href="core.html#plugins">Plugins</a></li>
<li class="toctree-l4"><a class="reference internal" href="core.html#bundles">Bundles</a></li>
<li class="toctree-l4"><a class="reference internal" href="core.html#application-context">Application Context</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="jpa.html">Minnal Jpa</a><ul>
<li class="toctree-l4"><a class="reference internal" href="jpa.html#domain-classes">Domain Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="jpa.html#configuring-jpa">Configuring JPA</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="migrations.html">Minnal Migrations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="migrations.html#create-migrations">Create Migrations</a></li>
<li class="toctree-l4"><a class="reference internal" href="migrations.html#run-migrations">Run Migrations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="instrumentation.html">Minnal Instrumentation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="instrumentation.html#resources">Resources</a></li>
<li class="toctree-l4"><a class="reference internal" href="instrumentation.html#sub-resources">Sub-Resources</a></li>
<li class="toctree-l4"><a class="reference internal" href="instrumentation.html#exclude-routes">Exclude Routes</a></li>
<li class="toctree-l4"><a class="reference internal" href="instrumentation.html#overriding-routes">Overriding Routes</a></li>
<li class="toctree-l4"><a class="reference internal" href="instrumentation.html#use-custom-key-as-identifier">Use custom key as identifier</a></li>
<li class="toctree-l4"><a class="reference internal" href="instrumentation.html#search-params">Search Params</a></li>
<li class="toctree-l4"><a class="reference internal" href="instrumentation.html#actions">Actions</a></li>
<li class="toctree-l4"><a class="reference internal" href="instrumentation.html#pagination">Pagination</a></li>
<li class="toctree-l4"><a class="reference internal" href="instrumentation.html#dynamically-including-excluding-response-fields">Dynamically including &amp; excluding response fields</a></li>
<li class="toctree-l4"><a class="reference internal" href="instrumentation.html#bulk-operations">Bulk Operations</a></li>
<li class="toctree-l4"><a class="reference internal" href="instrumentation.html#authorizing-routes">Authorizing Routes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="security.html">Minnal Security</a><ul>
<li class="toctree-l4"><a class="reference internal" href="security.html#session-store">Session Store</a></li>
<li class="toctree-l4"><a class="reference internal" href="security.html#authenticators">Authenticators</a></li>
<li class="toctree-l4"><a class="reference internal" href="security.html#authorizers">Authorizers</a></li>
<li class="toctree-l4"><a class="reference internal" href="security.html#white-listing-urls">White listing urls</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="generator.html">Minnal Generator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="generator.html#create-new-project">Create New Project</a></li>
<li class="toctree-l4"><a class="reference internal" href="generator.html#generate-models">Generate Models</a></li>
<li class="toctree-l4"><a class="reference internal" href="generator.html#generate-tests">Generate Tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="generator.html#start-server">Start Server</a></li>
<li class="toctree-l4"><a class="reference internal" href="generator.html#other-options">Other Options</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api.html">Minnal Api</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api.html#using-swagger-ui">Using Swagger UI</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="metrics.html">Minnal Metrics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="metrics.html#response-time-collector">Response Time Collector</a></li>
<li class="toctree-l4"><a class="reference internal" href="metrics.html#datasource-stats-collector">Datasource Stats Collector</a></li>
<li class="toctree-l4"><a class="reference internal" href="metrics.html#jmx-reporter">JMX Reporter</a></li>
<li class="toctree-l4"><a class="reference internal" href="metrics.html#graphite-reporter">Graphite Reporter</a></li>
<li class="toctree-l4"><a class="reference internal" href="metrics.html#custom-reporters">Custom Reporters</a></li>
<li class="toctree-l4"><a class="reference internal" href="metrics.html#publishing-app-metrics">Publishing App Metrics</a></li>
</ul>
</li>
<li class="toctree-l3 current"><a class="current reference internal" href="">Minnal Test</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#testing-resources">Testing Resources</a></li>
<li class="toctree-l4"><a class="reference internal" href="#testing-jpa-resources">Testing JPA Resources</a></li>
<li class="toctree-l4"><a class="reference internal" href="#testing-models">Testing Models</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="examples.html">Minnal Examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="examples.html#shopping-cart-application">Shopping Cart Application</a></li>
<li class="toctree-l4"><a class="reference internal" href="examples.html#cargo-application">Cargo Application</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../release-notes.html">Release Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#minnal-1-0-7-07-nov-2013">minnal-1.0.7 / 07-Nov-2013</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#minnal-1-0-6-05-nov-2013">minnal-1.0.6 / 05-Nov-2013</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#minnal-1-0-5-22-oct-2013">minnal-1.0.5 / 22-Oct-2013</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#minnal-1-0-4-11-oct-2013">minnal-1.0.4 / 11-Oct-2013</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#minnal-1-0-3-10-oct-2013">minnal-1.0.3 / 10-Oct-2013</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#minnal-1-0-2-09-oct-2013">minnal-1.0.2 / 09-Oct-2013</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#minnal-1-0-1-02-sep-2013">minnal-1.0.1 / 02-Sep-2013</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#minnal-1-0-0-29-aug-2013">minnal-1.0.0 / 29-Aug-2013</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#minnal-0-9-9-28-aug-2013">minnal-0.9.9 / 28-Aug-2013</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#minnal-0-9-8-27-aug-2013">minnal-0.9.8 / 27-Aug-2013</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#minnal-0-9-7-17-aug-2013">minnal-0.9.7 / 17-Aug-2013</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#minnal-0-9-6-12-aug-2013">minnal-0.9.6 / 12-Aug-2013</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contact.html">Contact</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../contact.html#reporting-bugs-requesting-enhancements">Reporting bugs / Requesting Enhancements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contact.html#contributing-to-minnal">Contributing to minnal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contact.html#developers">Developers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#exceptions-thrown">Exceptions thrown</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../faq.html#classnotfoundexception-com-sun-tools-attach-virtualmachine">ClassNotFoundException: com.sun.tools.attach.VirtualMachine</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
  <li><a href="metrics.html"
         title="Previous Chapter: Minnal Metrics">&laquo; Minnal Metrics</a></li>
  <li><a href="examples.html"
         title="Next Chapter: Minnal Examples">Minnal Examples &raquo;</a></li>
            
            
            
            
              <li></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting-started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">User Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#high-level-design">High level design</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#modules">Modules</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="core.html">Minnal Core</a></li>
<li class="toctree-l3"><a class="reference internal" href="jpa.html">Minnal Jpa</a></li>
<li class="toctree-l3"><a class="reference internal" href="migrations.html">Minnal Migrations</a></li>
<li class="toctree-l3"><a class="reference internal" href="instrumentation.html">Minnal Instrumentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="security.html">Minnal Security</a></li>
<li class="toctree-l3"><a class="reference internal" href="generator.html">Minnal Generator</a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html">Minnal Api</a></li>
<li class="toctree-l3"><a class="reference internal" href="metrics.html">Minnal Metrics</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="">Minnal Test</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#testing-resources">Testing Resources</a></li>
<li class="toctree-l4"><a class="reference internal" href="#testing-jpa-resources">Testing JPA Resources</a></li>
<li class="toctree-l4"><a class="reference internal" href="#testing-models">Testing Models</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="examples.html">Minnal Examples</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../release-notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contact.html">Contact</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
</ul>

        </div>
      </div>
    <div class="col-md-9">
      
  <div class="section" id="minnal-test">
<span id="manual-test"></span><h1>Minnal Test</h1>
<p>Minnal test module provide abstractions for testing out projects built using minnal. While <a class="reference internal" href="generator.html#manual-gen"><em>Minnal Generator</em></a> generates the test cases for your resources, there are instances where you want to write additional tests to test customized APIs or test out your domain models. This section takes you through these abstractions using example functionalities.</p>
<p>Minnal enforces your domain models to extend from <em>ActiveJpa</em> models. AcitveJpa does runtime byte code isnstrumentation on your model classes and hence your models should be tested using <a class="reference external" href="https://github.com/ActiveJpa/activejpa#testing-your-models">activejpa-test</a>. Minnal also uses <a class="reference external" href="https://github.com/minnal/Autopojo">AutoPojo</a> in the abstraction layer for auto populating the domain models. This eliminates you from constructing json/xml data test yourself.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Minnal test module supports only TestNG. Support for Junit is not there at this moment.</p>
</div>
<div class="section" id="testing-resources">
<h2>Testing Resources</h2>
<p>To test your resources, you should extend the abstract resource test class <tt class="docutils literal"><span class="pre">org.minnal.core.resource.BaseResourceTest</span></tt>. The abstract class has helper methods to construct the request and parse the resposne for output comparisons.</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DummyResourceTest</span> <span class="kd">extends</span> <span class="n">BaseResourceTest</span> <span class="o">{</span>

        <span class="nd">@Test</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testPostRequest</span><span class="o">()</span> <span class="o">{</span>
                <span class="n">Response</span> <span class="n">response</span> <span class="o">=</span> <span class="n">call</span><span class="o">(</span><span class="n">request</span><span class="o">(</span><span class="s">&quot;/dummy_resource/&quot;</span><span class="o">,</span> <span class="n">HttpMethod</span><span class="o">.</span><span class="na">POST</span><span class="o">),</span> <span class="s">&quot;your content&quot;</span><span class="o">);</span>
                <span class="n">assertEquals</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">getStatus</span><span class="o">(),</span> <span class="n">HttpResponseStatus</span><span class="o">.</span><span class="na">CREATED</span><span class="o">);</span>
                <span class="n">DummyModel</span> <span class="n">expected</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DummyModel</span><span class="o">();</span>
                <span class="n">DummyModel</span> <span class="n">actual</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="na">deserialize</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">getContent</span><span class="o">(),</span> <span class="n">DummyModel</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
                <span class="n">assertEquals</span><span class="o">(</span><span class="n">actual</span><span class="o">,</span> <span class="n">expected</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="nd">@Test</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetRequest</span><span class="o">()</span> <span class="o">{</span>
                <span class="n">Response</span> <span class="n">response</span> <span class="o">=</span> <span class="n">call</span><span class="o">(</span><span class="n">request</span><span class="o">(</span><span class="s">&quot;/dummy_resource/&quot;</span><span class="o">,</span> <span class="n">HttpMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">));</span>
                <span class="n">assertEquals</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">getStatus</span><span class="o">(),</span> <span class="n">HttpResponseStatus</span><span class="o">.</span><span class="na">OK</span><span class="o">);</span>
                <span class="kt">int</span> <span class="n">actualCount</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="na">deserialize</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">getContent</span><span class="o">(),</span> <span class="n">DummyModel</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">size</span><span class="o">();</span>
                <span class="n">assertEquals</span><span class="o">(</span><span class="n">actualCount</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="testing-jpa-resources">
<h2>Testing JPA Resources</h2>
<p>Testing your JPA resources is bit tricky. You will have to ensure the a new transaction is opened before starting the test and rolled back at the end. Minnal provides an abstract test class for testing JPA resources <tt class="docutils literal"><span class="pre">org.minnal.core.resource.BaseJPAResourceTest</span></tt></p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">OrderResourceTest</span> <span class="kd">extends</span> <span class="n">BaseJPAResourceTest</span> <span class="o">{</span>

        <span class="nd">@Test</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">listOrderTest</span><span class="o">()</span> <span class="o">{</span>
                <span class="n">org</span><span class="o">.</span><span class="na">minnal</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">domain</span><span class="o">.</span><span class="na">Order</span> <span class="n">order</span> <span class="o">=</span> <span class="n">createDomain</span><span class="o">(</span><span class="n">org</span><span class="o">.</span><span class="na">minnal</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">domain</span><span class="o">.</span><span class="na">Order</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
                <span class="n">order</span><span class="o">.</span><span class="na">persist</span><span class="o">();</span>
                <span class="n">Response</span> <span class="n">response</span> <span class="o">=</span> <span class="n">call</span><span class="o">(</span><span class="n">request</span><span class="o">(</span><span class="s">&quot;/orders/&quot;</span><span class="o">,</span> <span class="n">HttpMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">));</span>
                <span class="n">assertEquals</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">getStatus</span><span class="o">(),</span> <span class="n">HttpResponseStatus</span><span class="o">.</span><span class="na">OK</span><span class="o">);</span>
                <span class="n">assertEquals</span><span class="o">(</span><span class="n">serializer</span><span class="o">.</span><span class="na">deserializeCollection</span><span class="o">(</span>
                                <span class="n">response</span><span class="o">.</span><span class="na">getContent</span><span class="o">(),</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">List</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
                                <span class="n">org</span><span class="o">.</span><span class="na">minnal</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">domain</span><span class="o">.</span><span class="na">Order</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">size</span><span class="o">(),</span>
                                <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="n">org</span><span class="o">.</span><span class="na">minnal</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">domain</span><span class="o">.</span><span class="na">Order</span><span class="o">.</span><span class="na">count</span><span class="o">());</span>
        <span class="o">}</span>

        <span class="nd">@Test</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">createOrderTest</span><span class="o">()</span> <span class="o">{</span>
                <span class="n">org</span><span class="o">.</span><span class="na">minnal</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">domain</span><span class="o">.</span><span class="na">Order</span> <span class="n">order</span> <span class="o">=</span> <span class="n">createDomain</span><span class="o">(</span><span class="n">org</span><span class="o">.</span><span class="na">minnal</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">domain</span><span class="o">.</span><span class="na">Order</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
                <span class="n">Response</span> <span class="n">response</span> <span class="o">=</span> <span class="n">call</span><span class="o">(</span><span class="n">request</span><span class="o">(</span><span class="s">&quot;/orders/&quot;</span><span class="o">,</span> <span class="n">HttpMethod</span><span class="o">.</span><span class="na">POST</span><span class="o">,</span>
                                <span class="n">Serializer</span><span class="o">.</span><span class="na">DEFAULT_JSON_SERIALIZER</span>
                                                <span class="o">.</span><span class="na">serialize</span><span class="o">(</span><span class="n">order</span><span class="o">)));</span>
                <span class="n">assertEquals</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">getStatus</span><span class="o">(),</span> <span class="n">HttpResponseStatus</span><span class="o">.</span><span class="na">CREATED</span><span class="o">);</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="testing-models">
<h2>Testing Models</h2>
<p>To test your domain models, your test class should extend the class <tt class="docutils literal"><span class="pre">org.activejpa.entity.testng.BaseModelTest</span></tt> The base class takes care of byte code enhancement requirement of ActiveJpa and abstracts them out of your tests.</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">OrderTest</span> <span class="kd">extends</span> <span class="n">BaseModelTest</span> <span class="o">{</span>
        <span class="nd">@Test</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testCreateOrder</span><span class="o">()</span> <span class="o">{</span>
                <span class="n">Order</span> <span class="n">order</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Order</span><span class="o">();</span>
                <span class="n">order</span><span class="o">.</span><span class="na">setCustomerEmail</span><span class="o">(</span><span class="s">&quot;dummyemail@dummy.com&quot;</span><span class="o">);</span>
                <span class="n">order</span><span class="o">.</span><span class="na">persist</span><span class="o">();</span>
                <span class="n">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">(</span><span class="n">Order</span><span class="o">.</span><span class="na">where</span><span class="o">(</span><span class="s">&quot;customer_email&quot;</span><span class="o">,</span> <span class="s">&quot;dummyemail@dummy.com&quot;</span><span class="o">).</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span> <span class="n">order</span><span class="o">);</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>Take a look at <a class="reference external" href="https://github.com/ActiveJpa/activejpa#testing-your-models">activejap-test</a> for more information on testing your models and for additional exmaples.</p>
</div>
</div>


    </div>
      
  </div>
</div>
  
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2013, Ganesh Subramanian.<br/>
      Last updated on Nov 07, 2013.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2b1.<br/>
    </p>
  </div>
</footer>
  <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-41566886-1', 'minnal.github.io');
        ga('send', 'pageview');
  </script>

  </body>
</html>